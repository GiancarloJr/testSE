<div class="dashboard-container">
  <h2>Dashboard</h2>

  @if (isAdmin) {
    <mat-button-toggle-group
      [value]="viewMode"
      (change)="onViewModeChange($event.value)"
      class="view-toggle"
    >
      <mat-button-toggle value="global">Global</mat-button-toggle>
      <mat-button-toggle value="mine">Meu resumo</mat-button-toggle>
    </mat-button-toggle-group>
  }

  @if (loading) {
    <div class="spinner-wrapper">
      <mat-spinner diameter="48"></mat-spinner>
    </div>
  }

  @if (!loading) {
    <div class="cards-grid">
      @for (card of cards; track card.key) {
        <mat-card>
          <mat-card-content>
            <mat-card-subtitle>{{ card.label }}</mat-card-subtitle>
            <mat-card-title>{{ card.value }}</mat-card-title>
          </mat-card-content>
        </mat-card>
      }
    </div>

    <div class="chart-wrapper">
      <canvas baseChart
              [data]="chartData"
              [options]="chartOptions"
              type="bar">
      </canvas>
    </div>
  }
</div>
